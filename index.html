<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>피자 주문서 (이벤트 활용)</title>
  <style>
    body {
      font-family: "맑은 고딕", system-ui, sans-serif;
      margin: 20px;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 10px;
    }

    fieldset {
      border: 1px solid #333;
      padding: 15px;
      margin-bottom: 20px;
    }

    legend {
      font-weight: bold;
      padding: 0 5px;
    }

    .menu-item {
      margin: 5px 0;
    }

    .menu-item input[type="number"] {
      width: 50px;
      text-align: right;
    }

    .line {
      margin: 10px 0;
    }

    label {
      margin-right: 5px;
    }

    #address {
      width: 500px;
    }

    #total {
      width: 150px;
      text-align: right;
    }

    button {
      padding: 5px 10px;
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <h1>피자 주문서 (이벤트 활용)</h1>

  <!-- 메뉴 선택 영역 -->
  <fieldset>
    <legend>[메뉴 선택]</legend>

    <div class="menu-item">
      <input type="checkbox" id="combo" data-price="15000">
      <label for="combo">콤비네이션 피자 (15,000원)</label>
      <input type="number" id="qty-combo" value="1" min="1">
      개
    </div>

    <div class="menu-item">
      <input type="checkbox" id="pepperoni" data-price="12000">
      <label for="pepperoni">페퍼로니 피자 (12,000원)</label>
      <input type="number" id="qty-pepperoni" value="1" min="1">
      개
    </div>

    <div class="menu-item">
      <input type="checkbox" id="cheese" data-price="2000">
      <label for="cheese">치즈 토핑 추가 (2,000원)</label>
      <input type="number" id="qty-cheese" value="1" min="1">
      개
    </div>

    <div class="menu-item">
      <input type="checkbox" id="cola" data-price="1500">
      <label for="cola">콜라 1.25L (1,500원)</label>
      <input type="number" id="qty-cola" value="1" min="1">
      개
    </div>
  </fieldset>

  <!-- 배달 주소 -->
  <div class="line">
    <label for="address">배달 주소:</label>
    <input type="text" id="address" placeholder="주소를 입력하세요">
  </div>

  <!-- 주문 합계 -->
  <div class="line">
    <label for="total">주문 합계:</label>
    <input type="text" id="total" value="0" readonly>
    원
  </div>

  <!-- 버튼 -->
  <div class="line">
    <button type="button" id="orderBtn">주문하기</button>
    <button type="button" id="resetBtn">초기화</button>
  </div>

  <script>
    // 합계 계산 함수
    function calculateTotal() {
      let total = 0;

      const items = [
        { checkId: "combo", qtyId: "qty-combo" },
        { checkId: "pepperoni", qtyId: "qty-pepperoni" },
        { checkId: "cheese", qtyId: "qty-cheese" },
        { checkId: "cola", qtyId: "qty-cola" }
      ];

      items.forEach(item => {
        const checkbox = document.getElementById(item.checkId);
        const qtyInput = document.getElementById(item.qtyId);

        if (checkbox.checked) {
          const price = Number(checkbox.dataset.price);
          const qty = Number(qtyInput.value) || 0;
          total += price * qty;
        }
      });

      document.getElementById("total").value = total.toLocaleString();
    }

    // 체크박스나 수량이 바뀔 때마다 합계 다시 계산
    const allInputs = document.querySelectorAll(
      'input[type="checkbox"], input[type="number"]'
    );
    allInputs.forEach(el => {
      el.addEventListener("change", calculateTotal);
    });

    // 주문하기 버튼
    document.getElementById("orderBtn").addEventListener("click", () => {
      const totalText = document.getElementById("total").value;
      const address = document.getElementById("address").value.trim();

      if (!address) {
        alert("배달 주소를 입력하세요.");
        return;
      }

      if (totalText === "0" || totalText === "") {
        alert("메뉴를 선택하세요.");
        return;
      }

      alert("주문이 완료되었습니다.\n\n주소: " + address + "\n합계: " + totalText + "원");
    });

    // 초기화 버튼
    document.getElementById("resetBtn").addEventListener("click", () => {
      // 폼 전체를 초기화하는 대신 수동으로 초기화
      document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        cb.checked = false;
      });
      document.querySelectorAll('input[type="number"]').forEach(num => {
        num.value = 1;
      });
      document.getElementById("address").value = "";
      document.getElementById("total").value = "0";
    });
  </script>
</body>
</html>
